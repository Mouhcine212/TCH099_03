<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlightETS - Accueil</title>

    <!-- CSS principal -->
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="navbar.css">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/images/favicon.svg">
</head>
<body>

    <!-- HEADER NAVBAR -->
    <header class="navbar">
        <div class="logo">
            <img src="../assets/images/5a5de9f010820f4426c952b0d4a31b8e.jpg" alt="FlightETS">
            <span>FlightETS</span>
        </div>
        <ul class="nav-links">
            <li><a href="index.html">Accueil</a></li>
            <li><a href="recherche.html">Rechercher un vol</a></li>
            <li><a href="historique.html">Mes réservations</a></li>
            <li><a href="profil.html" id="nav-user" style="display:none;"></a></li>
            <li><a href="login.html" id="nav-login">Connexion</a></li>
            <li><a href="inscription.html" id="nav-register">Inscription</a></li>
            <li><a href="#" id="nav-logout" style="display:none;">Déconnexion</a></li>
        </ul>
    </header>

    <!-- HERO SECTION -->
    <section class="hero">
        <div class="hero-content">
            <h2>Voyagez avec Confort et Sérénité</h2>
            <p>Réservez vos vols facilement avec FlightETS.</p>
            <a href="recherche.html" class="cta-btn">Rechercher un vol</a>
        </div>
    </section>

    <!-- JS pour gérer la navbar dynamique -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const token = localStorage.getItem('token');
        const navUser = document.getElementById('nav-user');
        const navLogin = document.getElementById('nav-login');
        const navRegister = document.getElementById('nav-register');
        const navLogout = document.getElementById('nav-logout');

        if (token) {
            try {
                const user = JSON.parse(atob(token.split('.')[1])); // Decode JWT fake
                navUser.textContent = user.nom || "Mon Profil";
                navUser.style.display = "inline-block";
                navLogout.style.display = "inline-block";
                navLogin.style.display = "none";
                navRegister.style.display = "none";
            } catch (e) {
                console.error("Token invalide :", e);
            }
        } else {
            navUser.style.display = "none";
            navLogout.style.display = "none";
            navLogin.style.display = "inline-block";
            navRegister.style.display = "inline-block";
        }

        navLogout.addEventListener('click', (e) => {
            e.preventDefault();
            localStorage.removeItem('token');
            window.location.href = 'login.html';
        });
    });
    </script>

</body>
</html>
